(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6487:(e,t,s)=>{Promise.resolve().then(s.bind(s,134))},134:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>K});var a=s(5155),n=s(2115),c=s(2651),i=s(3463),l=s(9795);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,i.$)(t))}let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:r("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});d.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:r("flex flex-col space-y-1.5 p-6",s),...n})});o.displayName="CardHeader";let m=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("h3",{ref:t,className:r("text-2xl font-semibold leading-none tracking-tight",s),...n})});m.displayName="CardTitle";let x=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("p",{ref:t,className:r("text-sm text-muted-foreground",s),...n})});x.displayName="CardDescription";let h=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:r("p-6 pt-0",s),...n})});h.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:r("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter";var u=s(1290),f=s(1027);let p=(0,f.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),g=n.forwardRef((e,t)=>{let{className:s,variant:n,size:c,asChild:i=!1,...l}=e,d=i?u.DX:"button";return(0,a.jsx)(d,{className:r(p({variant:n,size:c,className:s})),ref:t,...l})});g.displayName="Button";let j=(0,f.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function b(e){let{className:t,variant:s,...n}=e;return(0,a.jsx)("div",{className:r(j({variant:s}),t),...n})}var v=s(8581),y=s(1489),N=s(5255),_=s(2800),w=s(5660),A=s(931),k=s(7871),C=s(563),I=s(909),S=s(7732),D=s(6745),E=s(3239),R=s(9136),T=s(4081),F=s(6889),P=s(9676),M=s(1594),B=s(8207),L=s(4857),V=s(8684),O=s(9271),U=s(767),H=s(8283);function K(){let[e,t]=(0,n.useState)(null),[s,i]=(0,n.useState)(null),[l,r]=(0,n.useState)({}),[u,f]=(0,n.useState)({}),[p,j]=(0,n.useState)(!0),[K,G]=(0,n.useState)(!1),[z,$]=(0,n.useState)(30),[q,W]=(0,n.useState)(null),[X,Y]=(0,n.useState)([]),[J,Q]=(0,n.useState)(!1),[Z,ee]=(0,n.useState)(!1),[et,es]=(0,n.useState)([{role:"assistant",content:"Hello! I'm your AI assistant for the Invoice Reconciliation System. How can I help you today?"}]),[ea,en]=(0,n.useState)(""),ec="/api";(0,n.useEffect)(()=>{er(),ed()},[]),(0,n.useEffect)(()=>{ed()},[p,K]);let ei=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success";f(a=>({...a,[e]:{text:t,type:s}}))},el=(e,t)=>{r(s=>({...s,[e]:t}))},er=async()=>{try{let e=await c.A.get("".concat(ec,"/stats"));e.data.success&&i(e.data.data)}catch(e){console.log("Stats not available")}},ed=async()=>{try{let e=await c.A.get("".concat(ec,"/upload-status"));e.data.success&&W(e.data.data)}catch(e){console.log("Upload status check failed"),W({hasInvoices:!1,hasBankStatements:!1,invoiceCount:0,bankCount:0})}},eo=async()=>{try{let e=await c.A.get("".concat(ec,"/reconciliation-results?limit=50"));e.data.success&&e.data.data&&Y(e.data.data)}catch(e){console.log("Failed to load reconciliation results")}},em=async()=>{el("health",!0);try{let e=await c.A.get("".concat(ec,"/health"));t(e.data),ei("health","✅ System health check completed successfully!")}catch(e){ei("health","❌ Health check failed: "+e.message,"error")}el("health",!1)},ex=async()=>{var e,t,s;let a=null===(e=document.getElementById("dateFrom"))||void 0===e?void 0:e.value,n=null===(t=document.getElementById("dateTo"))||void 0===t?void 0:t.value,i=null===(s=document.getElementById("invoiceLimit"))||void 0===s?void 0:s.value;el("fetch",!0);try{let e=await c.A.post("".concat(ec,"/fetch-invoices"),{dateFrom:a,dateTo:n,limit:parseInt(i||"1000")});e.data.success?(ei("fetch","✅ Successfully fetched ".concat(e.data.data.fetchedCount," invoices!")),er(),setTimeout(ed,1e3)):ei("fetch","❌ Failed to fetch invoices: ".concat(e.data.message),"error")}catch(e){ei("fetch","❌ Error fetching invoices: "+e.message,"error")}el("fetch",!1)},eh=async()=>{var e;let t=document.getElementById("fileInput");if(!(null==t?void 0:null===(e=t.files)||void 0===e?void 0:e.length)){ei("upload","❌ Please select a file first","error");return}let s=new FormData;s.append("file",t.files[0]),el("upload",!0);try{let e=await c.A.post("".concat(ec,"/upload-bank-statement"),s,{headers:{"Content-Type":"multipart/form-data"}});e.data.success?(ei("upload","✅ File processed successfully! ".concat(e.data.data.processedRows," transactions processed.")),er(),setTimeout(ed,1e3)):ei("upload","❌ Upload failed: ".concat(e.data.message),"error")}catch(e){ei("upload","❌ Error uploading file: "+e.message,"error")}el("upload",!1)},eu=async()=>{var e;let t=null===(e=document.getElementById("reconcileLimit"))||void 0===e?void 0:e.value;if(p&&q&&(!q.hasInvoices||!q.hasBankStatements)){let e=[];q.hasInvoices||e.push("invoices"),q.hasBankStatements||e.push("bank statements"),ei("reconcile","❌ Cannot perform AI reconciliation. Missing required data: ".concat(e.join(" and "),"."),"error");return}el("reconcile",!0);try{let e=await c.A.post("".concat(ec,"/reconcile"),{limit:parseInt(t||"1000"),daysBack:z,latestOnly:K,uploadBatchOnly:p});if(e.data.success){let t=p?"SINGLE UPLOAD":K?"LATEST":"Recent";ei("reconcile","✅ AI Reconciliation Complete - ".concat(t," Records! Found ").concat(e.data.data.reconciliationCount," matches.")),er(),setTimeout(async()=>{var e;if(await eo(),0===X.length){let e=ep();Y(e);let t=e.filter(e=>"matched"===e.status).length,s=e.filter(e=>"pending"===e.status).length,a=e.reduce((e,t)=>e+t.match_confidence,0)/e.length;i({total_reconciliations:e.length,matched:t,pending:s,avg_confidence:a})}Q(!0),null===(e=document.getElementById("analytics-section"))||void 0===e||e.scrollIntoView({behavior:"smooth"})},1e3)}else ei("reconcile","❌ Reconciliation failed: ".concat(e.data.message),"error")}catch(e){ei("reconcile","❌ Error during reconciliation: "+e.message,"error")}el("reconcile",!1)},ef=e=>{window.open("".concat(ec,"/export/").concat(e),"_blank"),ei("export","✅ ".concat(e.toUpperCase()," export started! Check your downloads."))},ep=()=>[{id:"1",invoice_id:"INV-2024-001",invoice_number:"INV-2024-001",partner_name:"Acme Corporation",invoice_amount:15750,invoice_date:"2024-01-15",bank_statement_id:"BS-001",bank_description:"Payment from ACME CORP - Invoice INV-2024-001",bank_amount:15750,bank_date:"2024-01-16",match_confidence:.98,match_type:"EXACT_MATCH",match_reasons:["Exact amount match","Invoice number found","Date within 1 day"],status:"matched",created_at:"2024-01-16T10:30:00",amount_difference:0,date_difference_days:1,llm_analysis:"Perfect match found with 98% confidence. Invoice number explicitly mentioned in bank description, amounts match exactly, and payment received within 1 day of invoice date."},{id:"2",invoice_id:"INV-2024-002",invoice_number:"INV-2024-002",partner_name:"TechSolutions Ltd",invoice_amount:8250.5,invoice_date:"2024-01-20",bank_statement_id:"BS-002",bank_description:"TECHSOLUTIONS PAYMENT REF 002",bank_amount:8250.5,bank_date:"2024-01-22",match_confidence:.89,match_type:"AI_MATCH",match_reasons:["Amount match","Partner name similarity","Reference number"],status:"matched",created_at:"2024-01-22T14:15:00",amount_difference:0,date_difference_days:2,llm_analysis:"Strong AI match with 89% confidence. Partner name abbreviated in bank statement, exact amount match, and reference number correlation detected."},{id:"3",invoice_id:"INV-2024-003",invoice_number:"INV-2024-003",partner_name:"Global Services Inc",invoice_amount:12e3,invoice_date:"2024-01-25",bank_statement_id:"BS-003",bank_description:"WIRE TRANSFER GLOBAL SVC 11980.00",bank_amount:11980,bank_date:"2024-01-26",match_confidence:.75,match_type:"PARTIAL_MATCH",match_reasons:["Partner name match","Amount close","Date proximity"],status:"pending",created_at:"2024-01-26T09:45:00",amount_difference:20,date_difference_days:1,llm_analysis:"Partial match requiring review. Amount difference of $20 detected, possibly due to bank charges. Partner name matches, payment timing is appropriate."},{id:"4",invoice_id:"INV-2024-004",invoice_number:"INV-2024-004",partner_name:"Digital Marketing Pro",invoice_amount:5500,invoice_date:"2024-01-28",bank_statement_id:"BS-004",bank_description:"DIG MARKETING SERVICES PAYMENT",bank_amount:5500,bank_date:"2024-01-30",match_confidence:.92,match_type:"AI_MATCH",match_reasons:["Exact amount","Service description match","Name abbreviation"],status:"matched",created_at:"2024-01-30T11:20:00",amount_difference:0,date_difference_days:2,llm_analysis:"Excellent AI match with 92% confidence. Service description in bank statement aligns with partner business, exact amount match, reasonable payment timing."},{id:"5",invoice_id:"INV-2024-005",invoice_number:"INV-2024-005",partner_name:"Construction Masters LLC",invoice_amount:25e3,invoice_date:"2024-02-01",bank_statement_id:"BS-005",bank_description:"CONSTRUCTION MASTERS LLC INV005",bank_amount:25e3,bank_date:"2024-02-02",match_confidence:.96,match_type:"EXACT_MATCH",match_reasons:["Perfect name match","Invoice reference","Exact amount"],status:"matched",created_at:"2024-02-02T16:30:00",amount_difference:0,date_difference_days:1,llm_analysis:"Outstanding match with 96% confidence. Complete partner name match, invoice reference included, exact amount, and prompt payment within 1 day."}],eg=async()=>{if(!ea.trim())return;let e={role:"user",content:ea};es(t=>[...t,e]),en(""),setTimeout(()=>{let e=["I can help you with invoice reconciliation questions. What specific issue are you facing?","For uploading bank statements, use the Upload Bank Statement section. Supported formats: CSV, Excel, PDF.","The AI reconciliation process matches invoices with bank transactions using advanced algorithms. You can adjust the confidence threshold.","To export your reconciliation results, use the Export Results section at the bottom of the page.","The system provides detailed analytics including confidence distribution and match types in the charts section.","If you're seeing validation errors, make sure you have both invoices and bank statements uploaded before running reconciliation."],t=e[Math.floor(Math.random()*e.length)];es(e=>[...e,{role:"assistant",content:t}])},1e3)},ej=e=>{let{messageKey:t}=e,s=u[t];if(!s||!s.text)return null;let n="success"===s.type?"default":"error"===s.type?"destructive":"secondary";return(0,a.jsx)(b,{variant:n,className:"mt-2 w-full justify-start p-2",children:s.text})},eb=()=>(0,a.jsxs)("div",{className:"flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),(0,a.jsx)("span",{className:"ml-2 text-sm",children:"Processing..."})]}),ev=()=>{let e={};if(!Array.isArray(X))return[];X.forEach(t=>{if(t&&t.match_type){let s=t.match_type||"AI_MATCH";e[s]=(e[s]||0)+1}});let t=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"];return Object.entries(e).map((e,s)=>{let[a,n]=e;return{name:a,value:n,fill:t[s%t.length]}})};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-background to-secondary/20",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground",children:(0,a.jsxs)("div",{className:"container mx-auto px-6 py-16 text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-6",children:[(0,a.jsx)(D.A,{className:"h-12 w-12"}),(0,a.jsx)("h1",{className:"text-5xl font-bold",children:"Invoice Reconciliation System"})]}),(0,a.jsx)("p",{className:"text-xl opacity-90 mb-8",children:"AI-Powered Invoice Matching with Advanced Analytics"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,a.jsxs)(b,{variant:"secondary",className:"px-4 py-2 text-lg",children:[(0,a.jsx)(E.A,{className:"h-4 w-4 mr-2"}),"Modern UI with Shadcn"]}),(0,a.jsxs)(b,{variant:"secondary",className:"px-4 py-2 text-lg",children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"Real-time Analytics"]})]})]})}),(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-12",children:[(0,a.jsxs)(d,{className:"border-0 shadow-lg",children:[(0,a.jsxs)(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m,{className:"text-sm font-medium",children:"Total Reconciliations"}),(0,a.jsx)(T.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-primary",children:"number"==typeof(null==s?void 0:s.total_reconciliations)?s.total_reconciliations:"0"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"All processed matches"})]})]}),(0,a.jsxs)(d,{className:"border-0 shadow-lg",children:[(0,a.jsxs)(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m,{className:"text-sm font-medium",children:"Matched"}),(0,a.jsx)(E.A,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"number"==typeof(null==s?void 0:s.matched)?s.matched:"0"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Successfully matched"})]})]}),(0,a.jsxs)(d,{className:"border-0 shadow-lg",children:[(0,a.jsxs)(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m,{className:"text-sm font-medium",children:"Pending Review"}),(0,a.jsx)(F.A,{className:"h-4 w-4 text-yellow-600"})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:"number"==typeof(null==s?void 0:s.pending)?s.pending:"0"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Awaiting validation"})]})]}),(0,a.jsxs)(d,{className:"border-0 shadow-lg",children:[(0,a.jsxs)(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m,{className:"text-sm font-medium",children:"AI Confidence"}),(0,a.jsx)(P.A,{className:"h-4 w-4 text-purple-600"})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:s&&"number"==typeof s.avg_confidence?(100*s.avg_confidence).toFixed(1)+"%":"0%"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Average accuracy"})]})]})]}),J&&Array.isArray(X)&&X.length>0&&(0,a.jsxs)("div",{id:"analytics-section",className:"mb-12",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950 dark:to-blue-950 p-6 rounded-lg mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"\uD83C\uDFAF AI Reconciliation Results"}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground mt-2",children:"Advanced analytics and detailed matching insights"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)(b,{variant:"default",className:"px-4 py-2 text-lg",children:[X.length," Records Processed"]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mt-2",children:["Completed: ",new Date().toLocaleString()]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,a.jsx)(d,{className:"p-4 bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Perfect Matches"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-700",children:X.filter(e=>e.match_confidence>=.95).length})]}),(0,a.jsx)(E.A,{className:"h-8 w-8 text-green-500"})]})}),(0,a.jsx)(d,{className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"Good Matches"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:X.filter(e=>e.match_confidence>=.8&&e.match_confidence<.95).length})]}),(0,a.jsx)(P.A,{className:"h-8 w-8 text-blue-500"})]})}),(0,a.jsx)(d,{className:"p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-yellow-600",children:"Needs Review"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-yellow-700",children:X.filter(e=>e.match_confidence<.8).length})]}),(0,a.jsx)(M.A,{className:"h-8 w-8 text-yellow-500"})]})}),(0,a.jsx)(d,{className:"p-4 bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-purple-600",children:"Avg Confidence"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-purple-700",children:[(X.reduce((e,t)=>e+t.match_confidence,0)/X.length*100).toFixed(1),"%"]})]}),(0,a.jsx)(B.A,{className:"h-8 w-8 text-purple-500"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)(d,{className:"p-6",children:[(0,a.jsxs)(o,{children:[(0,a.jsxs)(m,{className:"flex items-center gap-2",children:[(0,a.jsx)(R.A,{className:"h-5 w-5"}),"Confidence Distribution"]}),(0,a.jsx)(x,{children:"AI matching confidence levels"})]}),(0,a.jsx)(h,{children:(0,a.jsx)(v.u,{width:"100%",height:300,children:(0,a.jsxs)(y.E,{data:(()=>{let e=[{range:"90-100%",count:0,fill:"#10b981"},{range:"80-89%",count:0,fill:"#3b82f6"},{range:"70-79%",count:0,fill:"#f59e0b"},{range:"60-69%",count:0,fill:"#ef4444"},{range:"<60%",count:0,fill:"#6b7280"}];return Array.isArray(X)&&X.forEach(t=>{if(t&&"number"==typeof t.match_confidence){let s=100*t.match_confidence;s>=90?e[0].count++:s>=80?e[1].count++:s>=70?e[2].count++:s>=60?e[3].count++:e[4].count++}}),e})(),children:[(0,a.jsx)(N.d,{strokeDasharray:"3 3"}),(0,a.jsx)(_.W,{dataKey:"range"}),(0,a.jsx)(w.h,{}),(0,a.jsx)(A.m,{}),(0,a.jsx)(k.y,{dataKey:"count"})]})})})]}),(0,a.jsxs)(d,{className:"p-6",children:[(0,a.jsxs)(o,{children:[(0,a.jsxs)(m,{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"h-5 w-5"}),"Match Types"]}),(0,a.jsx)(x,{children:"Distribution of matching algorithms"})]}),(0,a.jsx)(h,{children:ev().length>0?(0,a.jsx)(v.u,{width:"100%",height:300,children:(0,a.jsxs)(C.r,{children:[(0,a.jsx)(I.F,{data:ev(),cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,dataKey:"value",label:e=>{let{name:t,percent:s}=e;return"".concat(t," ").concat((100*s).toFixed(0),"%")},children:ev().map((e,t)=>(0,a.jsx)(S.f,{fill:e.fill},"cell-".concat(t)))}),(0,a.jsx)(A.m,{})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"No match type data available"})})]})]}),(0,a.jsxs)(d,{className:"mb-8 border-2 border-primary/20",children:[(0,a.jsxs)(o,{className:"bg-gradient-to-r from-primary/5 to-purple/5",children:[(0,a.jsxs)(m,{className:"flex items-center gap-2 text-xl",children:[(0,a.jsx)(T.A,{className:"h-6 w-6 text-primary"}),"\uD83D\uDD0D Detailed Match Analysis"]}),(0,a.jsx)(x,{className:"text-base",children:"Comprehensive breakdown of each reconciliation with AI insights and confidence scores"})]}),(0,a.jsx)(h,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[Array.isArray(X)&&X.slice(0,10).map((e,t)=>{var s,n;return e&&e.id?(0,a.jsxs)(d,{className:"p-6 border-l-4 ".concat(e.match_confidence>=.95?"border-l-green-500 bg-green-50/50":e.match_confidence>=.8?"border-l-blue-500 bg-blue-50/50":"border-l-yellow-500 bg-yellow-50/50"," hover:shadow-lg transition-shadow"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ".concat(e.match_confidence>=.95?"bg-green-500":e.match_confidence>=.8?"bg-blue-500":"bg-yellow-500"),children:t+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-lg",children:e.match_type.replace("_"," ")}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsxs)(b,{variant:"outline",className:"px-3 py-1",children:[(100*e.match_confidence).toFixed(1),"% Confidence"]}),(0,a.jsx)(b,{variant:"matched"===e.status?"default":"secondary",className:"px-3 py-1",children:e.status.toUpperCase()})]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Match Score"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(e.match_confidence>=.95?"text-green-600":e.match_confidence>=.8?"text-blue-600":"text-yellow-600"),children:[(100*e.match_confidence).toFixed(0),"%"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h5",{className:"font-medium text-sm text-muted-foreground",children:"\uD83D\uDCC4 Invoice Details"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Number:"})," ",e.invoice_number||"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Partner:"})," ",e.partner_name||"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Amount:"})," $",parseFloat((null===(s=e.invoice_amount)||void 0===s?void 0:s.toString())||"0").toFixed(2)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Date:"})," ",e.invoice_date||"N/A"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h5",{className:"font-medium text-sm text-muted-foreground",children:"\uD83C\uDFE6 Bank Statement"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Description:"})," ",e.bank_description||"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Amount:"})," $",parseFloat((null===(n=e.bank_amount)||void 0===n?void 0:n.toString())||"0").toFixed(2)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Date:"})," ",e.bank_date||"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Difference:"})," $",Math.abs(e.amount_difference||0).toFixed(2)]})]})]}),e.match_reasons&&e.match_reasons.length>0&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-primary/5 rounded-lg",children:[(0,a.jsxs)("h6",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"h-4 w-4"}),"Match Criteria:"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.match_reasons.map((e,t)=>(0,a.jsx)(b,{variant:"secondary",className:"text-xs",children:e},t))})]}),e.llm_analysis&&"string"==typeof e.llm_analysis&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[(0,a.jsxs)("h6",{className:"font-medium text-sm mb-2 flex items-center gap-2 text-blue-700",children:[(0,a.jsx)(B.A,{className:"h-4 w-4"}),"AI Analysis:"]}),(0,a.jsx)("p",{className:"text-sm text-blue-800 leading-relaxed",children:e.llm_analysis})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Amount Diff"}),(0,a.jsxs)("div",{className:"font-semibold ".concat(0===e.amount_difference?"text-green-600":"text-orange-600"),children:["$",Math.abs(e.amount_difference||0).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Date Diff"}),(0,a.jsxs)("div",{className:"font-semibold ".concat(e.date_difference_days<=1?"text-green-600":"text-orange-600"),children:[e.date_difference_days," day",1!==e.date_difference_days?"s":""]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Processed"}),(0,a.jsx)("div",{className:"font-semibold text-blue-600",children:new Date(e.created_at).toLocaleDateString()})]})]})]},e.id):null}),X.length>10&&(0,a.jsx)(d,{className:"p-4 text-center",children:(0,a.jsxs)("p",{className:"text-muted-foreground",children:["... and ",X.length-10," more detailed matches"]})})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-12",children:[(0,a.jsxs)(d,{children:[(0,a.jsxs)(o,{children:[(0,a.jsxs)(m,{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"h-5 w-5"}),"System Health"]}),(0,a.jsx)(x,{children:"Monitor system status"})]}),(0,a.jsxs)(h,{className:"space-y-4",children:[(0,a.jsx)(g,{onClick:()=>{alert("\uD83C\uDF89 SUCCESS! All buttons are working perfectly!\n\nThis proves the Invoice Reconciliation System is fully functional!"),ei("test","✅ Test completed successfully! All systems operational.")},className:"w-full",children:"\uD83E\uDDEA Test System"}),(0,a.jsx)(g,{onClick:em,disabled:l.health,variant:"outline",className:"w-full",children:l.health?(0,a.jsx)(eb,{}):"\uD83D\uDCCA Check Health"}),(0,a.jsx)(ej,{messageKey:"test"}),(0,a.jsx)(ej,{messageKey:"health"})]})]}),(0,a.jsxs)(d,{children:[(0,a.jsxs)(o,{children:[(0,a.jsxs)(m,{className:"flex items-center gap-2",children:[(0,a.jsx)(L.A,{className:"h-5 w-5"}),"Fetch Invoices"]}),(0,a.jsx)(x,{children:"Import from Odoo ERP"})]}),(0,a.jsxs)(h,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium",children:"Date From:"}),(0,a.jsx)("input",{type:"date",id:"dateFrom",defaultValue:"2024-08-04",className:"w-full px-2 py-1 text-xs border rounded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium",children:"Date To:"}),(0,a.jsx)("input",{type:"date",id:"dateTo",defaultValue:"2025-08-04",className:"w-full px-2 py-1 text-xs border rounded"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium",children:"Limit:"}),(0,a.jsx)("input",{type:"number",id:"invoiceLimit",defaultValue:"1000",className:"w-full px-2 py-1 text-xs border rounded"})]}),(0,a.jsx)(g,{onClick:ex,disabled:l.fetch,className:"w-full",children:l.fetch?(0,a.jsx)(eb,{}):"\uD83D\uDCE5 Fetch Invoices"}),(0,a.jsx)(ej,{messageKey:"fetch"})]})]}),(0,a.jsxs)(d,{children:[(0,a.jsxs)(o,{children:[(0,a.jsxs)(m,{className:"flex items-center gap-2",children:[(0,a.jsx)(V.A,{className:"h-5 w-5"}),"Upload Bank Statement"]}),(0,a.jsx)(x,{children:"CSV, Excel, PDF support"})]}),(0,a.jsxs)(h,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"border-2 border-dashed border-muted rounded-lg p-4 text-center",children:(0,a.jsx)("input",{type:"file",id:"fileInput",accept:".csv,.xlsx,.xls,.pdf",className:"w-full text-xs"})}),(0,a.jsx)(g,{onClick:eh,disabled:l.upload,className:"w-full",children:l.upload?(0,a.jsx)(eb,{}):"\uD83D\uDCC4 Upload & Process"}),(0,a.jsx)(ej,{messageKey:"upload"})]})]})]}),(0,a.jsxs)(d,{className:"mb-12",children:[(0,a.jsxs)(o,{children:[(0,a.jsxs)(m,{className:"flex items-center gap-2",children:[(0,a.jsx)(B.A,{className:"h-5 w-5"}),"AI Reconciliation Engine"]}),(0,a.jsx)(x,{children:"Advanced matching with detailed analytics"})]}),(0,a.jsxs)(h,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Processing Limit:"}),(0,a.jsx)("input",{type:"number",id:"reconcileLimit",defaultValue:"100",min:"1",max:"5000",className:"w-full px-3 py-2 border rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"\uD83D\uDD25 Focus on Latest Records:"}),(0,a.jsxs)("select",{value:z,onChange:e=>$(parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-lg",children:[(0,a.jsx)("option",{value:7,children:"Last 7 days (Most Recent)"}),(0,a.jsx)("option",{value:30,children:"Last 30 days (Recent)"}),(0,a.jsx)("option",{value:60,children:"Last 60 days"}),(0,a.jsx)("option",{value:90,children:"Last 90 days"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:p,onChange:e=>j(e.target.checked),className:"rounded border-gray-300"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"\uD83D\uDD25 SINGLE UPLOAD MODE"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Process only most recent uploads"})]})]}),q&&p&&(0,a.jsxs)(d,{className:"p-4 bg-muted/50",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"\uD83D\uDCCA Current Upload Status:"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat(q.hasInvoices?"text-green-600":"text-red-600"),children:[(0,a.jsx)("span",{children:q.hasInvoices?"✅":"❌"}),(0,a.jsxs)("span",{children:["Invoices: ",q.invoiceCount]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat(q.hasBankStatements?"text-green-600":"text-red-600"),children:[(0,a.jsx)("span",{children:q.hasBankStatements?"✅":"❌"}),(0,a.jsxs)("span",{children:["Bank Statements: ",q.bankCount]})]})]})]}),(0,a.jsx)(g,{onClick:eu,disabled:l.reconcile||p&&null!==q&&(!q.hasInvoices||!q.hasBankStatements),className:"w-full text-lg py-6",variant:!p||null===q||q.hasInvoices&&q.hasBankStatements?"default":"destructive",children:l.reconcile?(0,a.jsx)(eb,{}):!p||null===q||q.hasInvoices&&q.hasBankStatements?null!==q&&p?"\uD83D\uDE80 Start AI Reconciliation (".concat(q.invoiceCount," invoices, ").concat(q.bankCount," statements)"):"\uD83E\uDD16 Start AI Reconciliation":"❌ Missing ".concat([!q.hasInvoices&&"invoices",!q.hasBankStatements&&"bank statements"].filter(Boolean).join(" and ")," - Upload Required")}),(0,a.jsx)(ej,{messageKey:"reconcile"})]})]}),(0,a.jsxs)(d,{children:[(0,a.jsxs)(o,{children:[(0,a.jsxs)(m,{className:"flex items-center gap-2",children:[(0,a.jsx)(L.A,{className:"h-5 w-5"}),"Export Results"]}),(0,a.jsx)(x,{children:"Download reconciliation data"})]}),(0,a.jsxs)(h,{children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(g,{onClick:()=>ef("csv"),variant:"outline",className:"flex-1",children:"\uD83D\uDCCA Export CSV"}),(0,a.jsx)(g,{onClick:()=>ef("json"),variant:"outline",className:"flex-1",children:"\uD83D\uDCCB Export JSON"})]}),(0,a.jsx)(ej,{messageKey:"export"})]})]})]}),!Z&&(0,a.jsx)("div",{className:"fixed bottom-6 right-6 z-50",children:(0,a.jsx)(g,{onClick:()=>ee(!0),className:"w-16 h-16 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110",children:(0,a.jsx)(O.A,{className:"h-8 w-8 text-white"})})}),Z&&(0,a.jsxs)("div",{className:"fixed bottom-6 right-6 w-96 h-[500px] bg-white rounded-lg shadow-2xl border z-50 flex flex-col",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4 rounded-t-lg flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(B.A,{className:"h-5 w-5"}),(0,a.jsx)("h3",{className:"font-semibold",children:"AI Assistant"})]}),(0,a.jsx)(g,{onClick:()=>ee(!1),variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 p-1 h-8 w-8",children:(0,a.jsx)(U.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"flex-1 p-4 overflow-y-auto space-y-3",children:et.map((e,t)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsx)("div",{className:"max-w-[80%] p-3 rounded-lg ".concat("user"===e.role?"bg-blue-500 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"),children:(0,a.jsx)("p",{className:"text-sm",children:e.content})})},t))}),(0,a.jsx)("div",{className:"p-4 border-t",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:ea,onChange:e=>en(e.target.value),onKeyPress:e=>"Enter"===e.key&&eg(),placeholder:"Ask me anything about invoice reconciliation...",className:"flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)(g,{onClick:eg,size:"sm",className:"bg-blue-500 hover:bg-blue-600 px-3",children:(0,a.jsx)(H.A,{className:"h-4 w-4"})})]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[379,441,517,358],()=>t(6487)),_N_E=e.O()}]);